<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mariprompter - Teleprompter Web</title>
  
  <!-- Trigger rebuild -->
  <!-- Colores del tema para PWA (Android) -->
  <meta name="theme-color" content="#000000">

  <!-- Manifest para PWA -->
  <link rel="manifest" href="manifest.json">

  <!-- Configuraci√≥n para iOS (Apple) "Add to Home Screen" -->
  <!-- Aseg√∫rate de que 'icons/apple-icon-180.png' sea la ruta correcta a tu icono -->
  <link rel="apple-touch-icon" href="icons/apple-icon-180.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Mariprompter">

  <style>
    /* Estilos CSS combinados de ambas secciones <style> */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Arial', sans-serif;
    }
    
    body {
        background: linear-gradient(135deg, #4a6de5 0%, #2575fc 100%); /* Este es el fondo principal */
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        color: #333;
        transition: all 0.3s ease;
    }
    
    header {
        text-align: center;
        padding: 20px;
        background-color: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        color: white;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        z-index: 100;
    }
    
    h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
    }
    
    .subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
    }
    
    .container {
        max-width: 1200px;
        margin: 20px auto;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        flex: 1;
        transition: all 0.3s ease;
    }
    
    .editor-section, .display-section, .instructions {
        background: white;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        overflow: hidden;
        transition: all 0.3s ease;
    }
    
    .section-header {
        background-color: #4a6de5;
        color: white;
        padding: 15px 20px;
        font-size: 1.3rem;
        font-weight: bold;
    }
    
    .editor-content {
        padding: 20px;
    }
    
    #script-text {
        width: 100%;
        height: 200px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        resize: vertical;
        line-height: 1.6;
        transition: all 0.3s ease;
    }
    
    .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        padding: 15px;
        background-color: #f8f9fa;
        border-top: 1px solid #eee;
    }
    
    button {
        padding: 10px 15px;
        border: none;
        border-radius: 6px;
        background-color: #4a6de5;
        color: white;
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
        transition: all 0.3s ease;
    }
    
    button:hover {
        background-color: #3a5bd5;
        transform: translateY(-2px);
    }
    
    button:active {
        transform: translateY(0);
    }
    
    button.stop {
        background-color: #e74c3c;
    }
    
    button.stop:hover {
        background-color: #c0392b;
    }
    
    button.play {
        background-color: #2ecc71;
    }
    
    button.play:hover {
        background-color: #27ae60;
    }
    
    button.continue {
        background-color: #3498db;
    }
    
    button.continue:hover {
        background-color: #2980b9;
    }
    
    .settings {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        align-items: center;
        padding: 0 15px;
    }
    
    .settings label {
        font-size: 14px;
        color: #555;
        display: flex;
        align-items: center;
        gap: 5px;
    }
    
    input[type="range"], select {
        accent-color: #4a6de5;
    }
    
    select {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 6px;
        background: white;
    }
    
    .display-content {
        height: 400px;
        overflow: hidden;
        position: relative;
        background-color: #000;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    #prompter-display {
        font-size: 32px;
        line-height: 1.8;
        text-align: center;
        padding: 20px;
        max-width: 90%;
        opacity: 0;
        transition: opacity 0.5s;
    }
    
    #prompter-display.running {
        animation: scrollText linear infinite;
        opacity: 1;
    }
    
    @keyframes scrollText {
        from {
            transform: translateY(100%);
        }
        to {
            transform: translateY(-100%);
        }
    }
    
    .speed-value {
        font-weight: bold;
        color: #4a6de5;
    }
    
    .instructions {
        background-color: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    
    .instructions h3 {
        color: #4a6de5;
        margin-bottom: 10px;
    }
    
    .instructions ul {
        padding-left: 20px;
        line-height: 1.8;
    }
    
    footer {
        text-align: center;
        padding: 20px;
        color: white;
        font-size: 14px;
        margin-top: auto;
        transition: all 0.3s ease;
    }
    
    /* Modo pantalla completa */
    .fullscreen-mode {
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100vh;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
    }
    
    .fullscreen-mode .container {
        margin: 0;
        padding: 0;
        height: 100vh;
        width: 100vw;
    }
    
    .fullscreen-mode header,
    .fullscreen-mode .editor-section,
    .fullscreen-mode .instructions,
    .fullscreen-mode footer {
        display: none;
    }
    
    .fullscreen-mode .display-section {
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100vh;
        border-radius: 0;
    }
    
    .fullscreen-mode .display-content {
        height: 100vh;
    }
    
    .fullscreen-header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        background-color: #4a6de5;
        display: none;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        z-index: 1001;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }
    
    .fullscreen-header .title {
        color: white;
        font-size: 18px;
        font-weight: bold;
    }
    
    .fullscreen-header .buttons {
        display: flex;
        gap: 10px;
    }
    
    .fullscreen-header button {
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        font-size: 14px;
        font-weight: bold;
        transition: all 0.3s ease;
    }
    
    .fullscreen-header button.play {
        background-color: #2ecc71;
        color: white;
    }
    
    .fullscreen-header button.pause {
        background-color: #3498db;
        color: white;
    }
    
    .fullscreen-header button.continue {
        background-color: #3498db;
        color: white;
    }
    
    .fullscreen-header button.stop {
        background-color: #e74c3c;
        color: white;
    }
    
    .fullscreen-header button.exit {
        background-color: #7f8c8d;
        color: white;
    }
    
    .fullscreen-header button:hover {
        transform: translateY(-2px);
    }
    
    .fullscreen-mode .fullscreen-header {
        display: flex;
    }
    
    @media (max-width: 768px) {
        h1 {
            font-size: 2rem;
        }
        
        .subtitle {
            font-size: 1rem;
        }
        
        #prompter-display {
            font-size: 24px;
        }
        
        .display-content {
            height: 300px;
        }
        
        .controls {
            flex-direction: column;
        }
        
        .settings {
            justify-content: center;
        }
        
        .fullscreen-header {
            top: 0;
            padding: 0 10px;
        }
        
        .fullscreen-header .title {
            font-size: 16px;
        }
        
        .fullscreen-header button {
            font-size: 12px;
            padding: 6px 8px;
        }
    }
  </style>
</head>
<body>
    <header>
        <h1>ü¶ã Mariprompter</h1>
        <p class="subtitle">Tu teleprompter web gratuito y f√°cil de usar</p>
    </header>
    
    <div class="container">
        <div class="editor-section">
            <div class="section-header">
                Editor de Texto
            </div>
            <div class="editor-content">
                <textarea id="script-text" placeholder="Escribe aqu√≠ el texto que deseas que se muestre en el teleprompter...">¬°Bienvenido a Mariprompter!

Este es un teleprompter completamente gratuito y de c√≥digo abierto. Puedes escribir tu gui√≥n aqu√≠ y se mostrar√° en la pantalla de abajo de forma autom√°tica.

Puedes ajustar la velocidad, el tama√±o del texto y el color para adaptarlo a tus necesidades. Haz clic en "Iniciar" para comenzar la reproducci√≥n.

¬°Perfecto para presentaciones, videos, discursos y m√°s!</textarea>
            </div>
            <div class="controls">
                <button id="start-btn" class="play">‚ñ∂ Iniciar</button>
                <button id="pause-btn">‚è∏ Pausa</button>
                <button id="stop-btn" class="stop">‚ñ† Detener</button>
                <button id="fullscreen-btn">‚õ∂ Pantalla Completa</button>
                <div class="settings">
                    <label>
                        Velocidad:
                        <span id="speed-value" class="speed-value">5</span>
                        <input type="range" id="speed-range" min="1" max="20" value="5">
                    </label>
                    <label>
                        Tama√±o:
                        <input type="range" id="size-range" min="20" max="60" value="32">
                    </label>
                    <label>
                        Color:
                        <select id="color-select">
                            <option value="white">Blanco</option>
                            <option value="yellow">Amarillo</option>
                            <option value="cyan">Cian</option>
                            <option value="lime">Verde Lim√≥n</option>
                        </select>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="display-section">
            <div class="section-header">
                Pantalla del Teleprompter
            </div>
            <div class="display-content">
                <div id="prompter-display"></div>
            </div>
        </div>
        
        <div class="instructions">
            <div class="section-header">
                üìö C√≥mo usar Mariprompter
            </div>
            <div class="instructions-content" style="padding: 20px;">
                <ul>
                    <li>Escribe o pega tu texto en el editor de arriba</li>
                    <li>Ajusta la velocidad de desplazamiento seg√∫n lo necesites</li>
                    <li>Cambia el tama√±o del texto para que sea f√°cil de leer</li>
                    <li>Selecciona un color que contraste bien con el fondo negro</li>
                    <li>Haz clic en "Iniciar" para comenzar la reproducci√≥n</li>
                    <li>Puedes pausar o detener en cualquier momento</li>
                    <li>Para usar en modo espejo (reflexi√≥n), coloca un espejo detr√°s de la c√°mara</li>
                    <li>Usa la barra espaciadora para pausar/reanudar</li>
                    <li>Presiona ESC para detener</li>
                    <li>Usa "Pantalla Completa" para una experiencia inmersiva</li>
                    <li>En modo pantalla completa, haz clic en "Salir" o presiona ESC para salir</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="fullscreen-header">
        <div class="title">Pantalla del Teleprompter</div>
        <div class="buttons">
            <button id="fullscreen-start" class="play">‚ñ∂ Iniciar</button>
            <button id="fullscreen-pause" class="pause">‚è∏ Pausa</button>
            <button id="fullscreen-continue" class="continue">‚è≠ Continuar</button>
            <button id="fullscreen-stop" class="stop">‚ñ† Detener</button>
            <button id="fullscreen-exit" class="exit">Salir</button>
        </div>
    </div>
    
    <footer>
        <p>ü¶ã Mariprompter - Teleprompter Web | Creado con‚ù§Ô∏è para presentadores, creadores de contenido y oradores</p>
    </footer>

    <script>
        // Elementos del DOM
        const scriptText = document.getElementById('script-text');
        const prompterDisplay = document.getElementById('prompter-display');
        const startBtn = document.getElementById('start-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const stopBtn = document.getElementById('stop-btn');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const fullscreenStart = document.getElementById('fullscreen-start');
        const fullscreenPause = document.getElementById('fullscreen-pause');
        const fullscreenContinue = document.getElementById('fullscreen-continue');
        const fullscreenStop = document.getElementById('fullscreen-stop');
        const fullscreenExit = document.getElementById('fullscreen-exit');
        const speedRange = document.getElementById('speed-range');
        const speedValue = document.getElementById('speed-value');
        const sizeRange = document.getElementById('size-range');
        const colorSelect = document.getElementById('color-select');
        
        // Variables de estado
        let animationDuration = 60;
        let isRunning = false;
        let isPaused = false;
        
        // Actualizar el texto del teleprompter
        function updatePrompterText() {
            prompterDisplay.innerHTML = scriptText.value.replace(/\n/g, '<br>');
        }
        
        // Iniciar el teleprompter
        function startPrompter() {
            if (!isRunning) {
                updatePrompterText();
                prompterDisplay.classList.add('running');
                prompterDisplay.style.animationDuration = animationDuration + 's';
                prompterDisplay.style.animationPlayState = 'running';
                isRunning = true;
                isPaused = false;
            } else if (isPaused) {
                prompterDisplay.style.animationPlayState = 'running';
                isPaused = false;
            }
        }
        
        // Pausar el teleprompter
        function pausePrompter() {
            if (isRunning && !isPaused) {
                prompterDisplay.style.animationPlayState = 'paused';
                isPaused = true;
            }
        }
        
        // Continuar el teleprompter (igual que pausar pero con l√≥gica inversa)
        function continuePrompter() {
            if (isRunning && isPaused) {
                prompterDisplay.style.animationPlayState = 'running';
                isPaused = false;
            }
        }
        
        // Detener el teleprompter
        function stopPrompter() {
            prompterDisplay.classList.remove('running');
            isRunning = false;
            isPaused = false;
            // Forzar reflow para reiniciar la animaci√≥n
            prompterDisplay.offsetHeight;
        }
        
        // Salir del modo pantalla completa
        function exitFullscreenMode() {
            document.body.classList.remove('fullscreen-mode');
        }
        
        // Actualizar velocidad (con rango m√°s amplio para velocidades m√°s lentas)
        function updateSpeed() {
            const speed = parseFloat(speedRange.value);
            speedValue.textContent = speed.toFixed(1);
            
            // Nueva f√≥rmula para permitir velocidades m√°s lentas
            // De 120s (muy lento) a 10s (r√°pido)
            animationDuration = 130 - (speed * 6);
            
            if (isRunning) {
                prompterDisplay.style.animationDuration = animationDuration + 's';
            }
        }
        
        // Actualizar tama√±o del texto
        function updateSize() {
            prompterDisplay.style.fontSize = sizeRange.value + 'px';
        }
        
        // Actualizar color del texto
        function updateColor() {
            prompterDisplay.style.color = colorSelect.value;
        }
        
        // Modo pantalla completa
        function enterFullscreenMode() {
            document.body.classList.add('fullscreen-mode');
        }
        
        function toggleFullscreenMode() {
            if (document.body.classList.contains('fullscreen-mode')) {
                exitFullscreenMode();
            } else {
                enterFullscreenMode();
            }
        }
        
        // Event Listeners para todos los botones
        // Botones normales
        startBtn.addEventListener('click', startPrompter);
        pauseBtn.addEventListener('click', pausePrompter);
        stopBtn.addEventListener('click', stopPrompter);
        fullscreenBtn.addEventListener('click', toggleFullscreenMode);
        
        // Botones de pantalla completa
        fullscreenStart.addEventListener('click', startPrompter);
        fullscreenPause.addEventListener('click', pausePrompter);
        fullscreenContinue.addEventListener('click', continuePrompter);
        fullscreenStop.addEventListener('click', stopPrompter);
        fullscreenExit.addEventListener('click', exitFullscreenMode);
        
        // Controles adicionales
        speedRange.addEventListener('input', updateSpeed);
        sizeRange.addEventListener('input', updateSize);
        colorSelect.addEventListener('change', updateColor);
        
        scriptText.addEventListener('input', () => {
            if (isRunning) {
                updatePrompterText();
            }
        });
        
        // Inicializaci√≥n
        updatePrompterText();
        updateSpeed();
        updateSize();
        updateColor();
        
        // Permitir uso de atajos de teclado
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (isRunning) {
                    if (isPaused) {
                        continuePrompter();
                    } else {
                        pausePrompter();
                    }
                } else {
                    startPrompter();
                }
            } else if (e.code === 'Escape') {
                stopPrompter();
                if (document.body.classList.contains('fullscreen-mode')) {
                    exitFullscreenMode();
                }
            }
        });
        
        // Asegurar que el texto se actualice al cargar
        window.addEventListener('load', () => {
            updatePrompterText();
        });
    </script>

    <!-- Script de registro del Service Worker (va al final del body) -->
    <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("Service Worker registrado"))
        .catch(err => console.error("Error al registrar Service Worker:", err));
    }
    </script>
</body>
</html>
